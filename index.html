<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>IPU SGPA Calculator</title>

  <!-- CSS link -->
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="box">
    <h2>IPU SGPA Calculator</h2>

    <div id="subjects"></div>

    <button class="add" onclick="addSubject()">+ Add Subject</button>
    <button class="calc" onclick="calcSGPA()">Calculate SGPA</button>

    <div id="result" class="result"></div>
  </div>

<script>
let count = 0;

function addSubject() {
  count++;

  const div = document.createElement("div");
  div.className = "sub";

  div.innerHTML = `
    <b>Subject ${count}</b>

    <div class="row">
      <input type="number" placeholder="Marks" class="marks">
      <input type="number" placeholder="Credits" class="credits">
    </div>

    <button class="remove" onclick="this.parentElement.remove()">Remove</button>
  `;

  document.getElementById("subjects").appendChild(div);
}

// Grade Points as per IPU system
function getGP(m) {
  if (m >= 90) return 10;
  if (m >= 75) return 9;
  if (m >= 65) return 8;
  if (m >= 55) return 7;
  if (m >= 50) return 6;
  if (m >= 45) return 5;
  if (m >= 40) return 4;
  return 0;
}

function calcSGPA() {
  const marks = document.querySelectorAll(".marks");
  const credits = document.querySelectorAll(".credits");

  let numerator = 0;
  let denominator = 0;
  let backlogs = 0;

  for (let i = 0; i < marks.length; i++) {
    let m = Number(marks[i].value);
    let c = Number(credits[i].value);

    if (isNaN(m) || isNaN(c)) continue;

    denominator += c;

    if (m < 40) {
      backlogs++;
    } else {
      numerator += getGP(m) * c;
    }
  }

  let sgpa = denominator === 0 ? 0 : (numerator / denominator).toFixed(2);

  document.getElementById("result").innerHTML =
    `SGPA: ${sgpa} <br> Backlogs: ${backlogs}`;
}

// default 1 subject
addSubject();
</script>

</body>
</html>
